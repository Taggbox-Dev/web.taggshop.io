"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[4438],{64438:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});var a=s(47313),i=s(59204),n=s(73763),o=s(97914),l=s(46417);const r=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase());class c extends a.Component{constructor(){super(...arguments),this.state={isOpen:!1,step:1,wall_id:null,name:null,email:null,upload_image:[],receiveMail:!1,tandc:!0,nameError:!1,emailError:!1},this.onShowCloseSubmitPicPopUp=t=>{const{appendData:e,wall:s}=this.props;this.props.showPopUP({type:"submit-pic",card:{},personalization:s.Personalization,ThemeRule:s.ThemeRule,UserRule:s.UserRule,wall:s})},this.updateImageWithData=t=>{const{upload_image:e}=this.state;e&&e.length<5&&(e.push(t),this.setState({upload_image:e}))},this.onUpdateImageAddCaption=t=>e=>{const{upload_image:s}=this.state;s&&s.length>0&&s[t]&&(s[t].caption=e.target.value,s[t].review="",s[t].rating=0,this.setState({upload_image:s}))},this.onUpdateImageAddReview=t=>e=>{const{upload_image:s}=this.state;s&&s.length>0&&s[t]&&(s[t].review=e.target.value,s[t].caption="",this.setState({upload_image:s}))},this.onUpdateImageAddRatings=(t,e)=>{const{upload_image:s}=this.state;s&&s.length>0&&s[e]&&(s[e].caption="",s[e].rating=t,this.setState({upload_image:s}))},this.onUpdateStep=t=>e=>{this.setState({step:t})},this.onTextName=t=>{this.setState({name:t.target.value,nameError:!1},(()=>{null!=this.state.name&&0!=this.state.name.length||this.setState({nameError:!0})}))},this.onTextEmail=t=>{this.setState({email:t.target.value,emailError:!1},(()=>{null!=this.state.email&&0!=this.state.email.length&&r(this.state.email)&&!this.state.email.includes("mailinator")||this.setState({emailError:!0})}))},this.onSubmitData=t=>{const{name:e,email:s,upload_image:a,tandc:i,receiveMail:o}=this.state,{wallId:l}=this.props;i&&e&&e.length>0&&s&&s.length>0&&r(s)&&!s.includes("mailinator")&&a&&a.length>0&&i?(0,n.uM)({wall_id:l,name:e,email:s,upload_image:a,receive_mail:o}).then((t=>{this.setState({step:3})})).catch((t=>{console.error(t)})):(null!=this.state.name&&0!=this.state.name.length||this.setState({nameError:!0}),null!=this.state.email&&0!=this.state.email.length&&r(this.state.email)&&!s.includes("mailinator")||this.setState({emailError:!0}))},this.onUpdatereceiveMail=t=>{const{receiveMail:e}=this.state;this.setState({receiveMail:!e})},this.onUpdatetandc=t=>{const{tandc:e}=this.state;this.setState({tandc:!e})},this.removeProductImage=t=>e=>{const{upload_image:s}=this.state;s&&s.length>0&&s.splice(t,1),this.setState({upload_image:s})}}render(){const{isOpen:t,upload_image:e,step:s,name:a,email:i,receiveMail:n,tandc:r,nameError:c,emailError:_}=this.state,{wall:m}=this.props,h=m.UgcSettings,d=h.onsite_status?{backgroundColor:h.onsite_btn_color,borderColor:h.onsite_btn_color,color:h.onsite_btn_txt_color}:"",u={fontSize:m.UgcSettings.btn_fontSize+"px",fontFamily:m.UgcSettings.onsite_css_font_btn};return(0,l.jsx)(l.Fragment,{children:0!==h.onsite_status?(0,l.jsx)("div",{id:"tb_post_submit_container_button",className:"50"!=m.Personalization.commerceTheme?"tb_post_submit_container":"ts_gst__post_submit_container_button",children:"50"!=m.Personalization.commerceTheme?(0,l.jsx)("div",{className:"btn-scan",children:(0,l.jsxs)("div",{style:d,className:"tb_post_submit_btn",onClick:this.onShowCloseSubmitPicPopUp,children:[1==m.UgcSettings.onsite_qr_code_status?(0,l.jsxs)(l.Fragment,{children:[" ",(0,l.jsx)("div",{className:"qr-image",children:(0,l.jsx)(o.ZP,{level:"L",size:60,value:m.UgcSettings.onsite_popup_url})})]}):null,h.onsite_qr_code_btn_text?(0,l.jsxs)(l.Fragment,{children:[1==m.UgcSettings.onsite_qr_code_status?(0,l.jsx)("div",{className:"ts__qr_separator",children:(0,l.jsx)("div",{})}):"",(0,l.jsx)("div",{className:"ts_qr-text  tb-cTSfont-".concat(m.UgcSettings.onsite_font_varient_btn),style:u,children:(0,l.jsx)("div",{className:"ts_qr-text_wrap tb-cTSfont-".concat(m.UgcSettings.onsite_font_varient_btn),style:u,children:h.onsite_qr_code_status&&h.onsite_status||h.onsite_qr_code_status?h.onsite_qr_code_btn_text:h.onsite_status?h.onsite_btn_txt:"Submit a Post"})})," "]}):""]})}):(0,l.jsx)("div",{className:"ts_gst_btn-scan",style:d,children:(0,l.jsxs)("div",{className:"ts_gst_post_submit_btn",onClick:this.onShowCloseSubmitPicPopUp,children:[(0,l.jsxs)("div",{className:"ts_gst_qr-image",children:["1"==m.UgcSettings.onsite_qr_code_status?(0,l.jsx)("div",{style:{backgroundColor:"white",padding:"4.5px",width:"70px",height:"70px",marginLeft:"auto",marginRight:"auto"},children:(0,l.jsx)(o.ZP,{level:"L",size:60,value:m.UgcSettings.onsite_popup_url})}):"",(0,l.jsx)("div",{className:"ts_gst_qr-text  tb-cTSfont-".concat(m.UgcSettings.font_varient),style:u,children:(0,l.jsx)("div",{className:"ts_gst_qr-text_wrap ".concat("1"==m.UgcSettings.onsite_qr_code_status?"wt_qrcode":"wo_qrcode"),children:h.onsite_qr_code_status&&h.onsite_status||h.onsite_qr_code_status?h.onsite_qr_code_btn_text:h.onsite_status?h.onsite_btn_txt:"Submit a Post"})})]}),(0,l.jsx)("div",{className:"ts_gst_qr-image_mobile",children:"Add Your Photo"})]})})}):""})}}const _=(0,i.$j)((t=>({wallId:t.appData.wallID})),(t=>({showPopUP:e=>t((0,n.Bm)(e))})))(c)}}]);