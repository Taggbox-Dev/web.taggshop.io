"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[201],{40201:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(47313),o=a(61395),r=a.n(o),n=a(59204),i=a(73763),l=a(17739),p=a(2651),h=a(46417);class c extends s.PureComponent{constructor(){super(...arguments),this.allImageQueue=[],this.state={allFirstImage:!1},this.requestData=()=>{const{wall:e,appendData:t,hasMoreData:a,loaderData:s}=this.props,o=e.Personalization.numberOfPosts,r=Math.floor(Date.now()/1e3);a&&!s.isShowMoreLoading&&this.props.getDataNextSteps(e.Wall.id,r,o,t.networkID,t.after,t.heightEvent)},this.handleAllImageError=e=>{try{const t=e.target.getAttribute("data-item-id");this.allImageQueue.includes({src:t,e:e})||this.allImageQueue.push({src:t,e:e}),setTimeout((()=>{this.state.allFirstImage||this.processAllImageQueue()}),100)}catch(t){}},this.processAllImageQueue=async()=>{if(this.allImageQueue.length){this.setState({allFirstImage:!0});const{src:e,e:t}=this.allImageQueue[0];e&&setTimeout((()=>{(0,l.bO)(t,this.nextProcessAllImageQueue)}),100)}},this.nextProcessAllImageQueue=()=>{try{this.allImageQueue.shift(),this.processAllImageQueue()}catch(e){}}}componentDidMount(){const{wall:e,appendData:t}=this.props;new ResizeObserver((()=>{window.dispatchEvent(new Event("resize"))})).observe(document.querySelector(".taggshopContainer")),t&&e.Personalization.autoScrollStatus&&window.addEventListener("scroll",(()=>{let e=document.getElementById("scrlBarComanW");var t=window.innerHeight+window.scrollY;e.scrollHeight-10<t&&this.requestData()}))}render(){const{newPostData:e,completeDataObject:t,adjustWidth:a,wall:s}=this.props,o=this.props.appData.wall.User.id;return(0,h.jsx)("div",{className:"ts_sp_post_container",id:"ts_theme_container",children:(0,h.jsx)(r(),{className:"ts_sp_post_container theme".concat(s.Personalization.commerceTheme),elementType:"div",options:{transitionDuration:0,percentPosition:!0,itemSelector:".ts_sp_post_wrapper",fitWidth:!0,columnWidth:0},disableImagesLoaded:!1,updateOnEachImageLoad:!1,imagesLoadedOptions:{},style:{width:"100%!important"},enableResizableChildren:!1,children:e&&e.length>0?e.map(((e,s)=>{const r=t[e];return(0,h.jsx)(p.Z,{className:"ts_sp_post_wrapper",handleAllImageError:this.handleAllImageError,ownerId:o,itemData:r,itemIndex:s,adjustWidth:a,...this.props},"post_id_".concat(s))})):null})})}}const d=(0,n.$j)((e=>{const{appData:t}=e;return{appData:t,loaderData:e.loaderData,newPostData:t.newPostData,postData:t.postData.postData,appendData:t.postData.appendData,hasMoreData:!t.postData.hasMoreData[0]||0!=t.postData.hasMoreData[0].hasMoreData&&(!t.postData.hasMoreData[t.postData.appendData.networkID]||t.postData.hasMoreData[t.postData.appendData.networkID].hasMoreData)}}),(e=>({getDataNextSteps:(t,a,s,o,r,n,l)=>e((0,i.Sx)(t,a,s,o,r,n,l))})))(c)}}]);