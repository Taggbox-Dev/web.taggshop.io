"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[427],{30137:function(e,t,a){a.r(t);var n=a(1413),r=a(42982),o=a(15671),s=a(43144),l=a(79340),i=a(48347),u=a(47313),p=a(8354),c=a(73763),d=a(17739),m=a(2651),h=a(46417),D=(0,u.lazy)((function(){return Promise.all([a.e(874),a.e(885),a.e(771)]).then(a.bind(a,54771))})),f=function(e){(0,l.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,o.Z)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).allImageQueue=[],e.state={allFirstImage:!1,showSlides:!1},e.onUpdateData=function(t){setTimeout((function(){return e.requestData()}),1e3)},e.requestData=function(){var t=e.props,a=t.wall,n=t.appendData,r=t.hasMoreData,o=t.loaderData,s=a.ThemeRule.numberOfPosts,l=Math.floor(Date.now()/1e3);r&&!o.isShowMoreLoading&&e.props.getDataNextSteps(a.Wall.id,l,s,n.networkID,n.after,n.heightEvent)},e.onLoadPopup=function(t,a){var n=e.props,r=n.wall,o=n.postData,s=n.languageSetting,l=n.completeDataObject,i=n.wallId,u=n.webFilters,p=o.map((function(e){return l[e]})),m=p.filter((function(e){return!String(e.id).includes("free_add_")})),h=(0,d.E6)(m,a.id,t);1===r.Personalization.postFeatured&&((0,d.st)("add"),e.props.showPopUP({type:"post",card:a,idArray:m,index:h,viewOnText:s.viewOnText,shareText:s.shareText,personalization:r.Personalization,ThemeRule:r.ThemeRule,webFilters:u,UserRule:r.UserRule,wall:r})),(0,c.S5)({action:2,wall:i,feed:a.feedId,post:a.referenceId})},e.handleAllImageError=function(t){try{var a=t.target.getAttribute("data-item-id");e.allImageQueue.push({src:a,e:t}),e.state.allFirstImage||e.processAllImageQueue()}catch(n){}},e.processAllImageQueue=function(){if(e.allImageQueue.length){e.setState({allFirstImage:!0});var t=e.allImageQueue[0],a=t.src,n=t.e;a&&(0,d.bO)(n,e.nextProcessAllImageQueue)}},e.nextProcessAllImageQueue=function(){try{e.allImageQueue.shift(),e.processAllImageQueue()}catch(t){}},e}return(0,s.Z)(a,[{key:"render",value:function(){var e,t,a,o=this,s=this.props,l=s.completeDataObject,i=s.hasMoreData,p=s.wall,c=s.newPostData,f=s.loaderData,g=(0,d.XR)(null===p||void 0===p||null===(e=p.ThemeRule)||void 0===e?void 0:e.mobileColumn,null===p||void 0===p||null===(t=p.ThemeRule)||void 0===t?void 0:t.numberOfCoumn,null===p||void 0===p||null===(a=p.Personalization)||void 0===a?void 0:a.commerceTheme);return(0,h.jsx)("div",{className:"ts_csl_post_container",id:"ts_theme_container",children:(0,h.jsx)(u.Suspense,{fallback:(0,h.jsx)("div",{children:"Loading..."}),children:(0,h.jsx)(D,{"slides-per-view":g,navigation:JSON.stringify(f.isShowMoreLoading?{nextEl:".swiper-button",prevEl:".swiper-button-prev"}:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",disabledClass:"swiper-button-none"}),"passive-listeners":!1,"long-swipes-ratio":.01,"long-swipes-ms":100,hasMoreData:i,loaderData:f,onUpdateData:this.onUpdateData,children:c&&c.length>0?(0,r.Z)(c).map((function(e,t){var a=l[e];return(0,h.jsx)("swiper-slide",{children:(0,h.jsx)(m.Z,(0,n.Z)({className:"ts_csl_post_wrapper ".concat("1"==a.type?"ts_csl_textPost":""," "),handleAllImageError:o.handleAllImageError,itemData:a,itemIndex:t},o.props),"post_id_".concat(t))},"cs".concat(t))})):null})})})}}]),a}(u.PureComponent);t.default=(0,p.$j)((function(e){var t=e.appData;return{appData:t,loaderData:e.loaderData,newPostData:t.newPostData,appendData:t.postData.appendData,hasMoreData:!t.postData.hasMoreData[0]||!1!==t.postData.hasMoreData[0].hasMoreData&&(!t.postData.hasMoreData[t.postData.appendData.networkID]||t.postData.hasMoreData[t.postData.appendData.networkID].hasMoreData)}}),(function(e){return{getDataNextSteps:function(t,a,n,r,o,s,l){return e((0,c.Sx)(t,a,n,r,o,s,l))},showPopUP:function(t){return e((0,c.Bm)(t))}}}))(f)},85942:function(e,t,a){a.d(t,{Z:function(){return n}});var n=function(e,t){return new Promise((function(a,n){var r=null,o=new Image;o.addEventListener("load",(function(){r&&clearTimeout(r),a(o)})),o.addEventListener("error",(function(e){r&&clearTimeout(r),n("".concat(e.type,": ").concat(e.message))})),o.src=e,t&&(r=setTimeout((function(){return n("Timeout exception")}),t))}))}}}]);