"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[1975],{30137:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(47313),o=a(59204),l=a(73763),r=a(17739),n=a(2651),i=a(46417);const p=(0,s.lazy)((()=>Promise.all([a.e(8215),a.e(9885),a.e(5283),a.e(7463)]).then(a.bind(a,37463))));class d extends s.PureComponent{constructor(){super(...arguments),this.allImageQueue=[],this.state={allFirstImage:!1,showSlides:!1},this.onUpdateData=e=>{setTimeout((()=>this.requestData()),1e3)},this.requestData=()=>{const{wall:e,appendData:t,hasMoreData:a,loaderData:s}=this.props,o=e.ThemeRule.numberOfPosts,l=Math.floor(Date.now()/1e3);a&&!s.isShowMoreLoading&&this.props.getDataNextSteps(e.Wall.id,l,o,t.networkID,t.after,t.heightEvent)},this.onLoadPopup=(e,t)=>{const{wall:a,postData:s,languageSetting:o,completeDataObject:n,wallId:i,webFilters:p}=this.props;let d=s.map((e=>n[e])),h=d.filter((e=>!String(e.id).includes("free_add_"))),u=(0,r.E6)(h,t.id,e);1===a.Personalization.postFeatured&&((0,r.st)("add"),this.props.showPopUP({type:"post",card:t,idArray:h,index:u,viewOnText:o.viewOnText,shareText:o.shareText,personalization:a.Personalization,ThemeRule:a.ThemeRule,webFilters:p,UserRule:a.UserRule,wall:a})),(0,l.S5)({action:2,wall:i,feed:t.feedId,post:t.referenceId})},this.handleAllImageError=e=>{try{const t=e.target.getAttribute("data-item-id");this.allImageQueue.push({src:t,e:e}),this.state.allFirstImage||this.processAllImageQueue()}catch(t){}},this.processAllImageQueue=()=>{if(this.allImageQueue.length){this.setState({allFirstImage:!0});const{src:e,e:t}=this.allImageQueue[0];e&&(0,r.bO)(t,this.nextProcessAllImageQueue)}},this.nextProcessAllImageQueue=()=>{try{this.allImageQueue.shift(),this.processAllImageQueue()}catch(e){}}}render(){var e,t,a;const{completeDataObject:o,hasMoreData:l,wall:d,newPostData:h,loaderData:u}=this.props,c=(0,r.XR)(null===d||void 0===d||null===(e=d.ThemeRule)||void 0===e?void 0:e.mobileColumn,null===d||void 0===d||null===(t=d.ThemeRule)||void 0===t?void 0:t.numberOfCoumn,null===d||void 0===d||null===(a=d.Personalization)||void 0===a?void 0:a.commerceTheme);return(0,i.jsx)("div",{className:"ts_csl_post_container",id:"ts_theme_container",children:(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)("div",{children:"Loading..."}),children:(0,i.jsx)(p,{"slides-per-view":c,navigation:JSON.stringify(u.isShowMoreLoading?{nextEl:".swiper-button",prevEl:".swiper-button-prev"}:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",disabledClass:"swiper-button-none"}),"passive-listeners":!1,"long-swipes-ratio":.01,"long-swipes-ms":100,hasMoreData:l,loaderData:u,onUpdateData:this.onUpdateData,children:h&&h.length>0?[...h].map(((e,t)=>{const a=o[e];return(0,i.jsx)("swiper-slide",{children:(0,i.jsx)(n.Z,{className:"ts_csl_post_wrapper ".concat("1"==a.type?"ts_csl_textPost":""," "),handleAllImageError:this.handleAllImageError,itemData:a,itemIndex:t,...this.props},"post_id_".concat(t))},"cs".concat(t))})):null})})})}}const h=(0,o.$j)((e=>{const{appData:t}=e;return{appData:t,loaderData:e.loaderData,newPostData:t.newPostData,appendData:t.postData.appendData,hasMoreData:!t.postData.hasMoreData[0]||!1!==t.postData.hasMoreData[0].hasMoreData&&(!t.postData.hasMoreData[t.postData.appendData.networkID]||t.postData.hasMoreData[t.postData.appendData.networkID].hasMoreData)}}),(e=>({getDataNextSteps:(t,a,s,o,r,n,i)=>e((0,l.Sx)(t,a,s,o,r,n,i)),showPopUP:t=>e((0,l.Bm)(t))})))(d)},34041:(e,t,a)=>{a.d(t,{Z:()=>l});const s="Window variable not found",o="Timeout exception",l=(e,t)=>new Promise(((a,l)=>{if("undefined"===typeof window)return l(s);let r=null;const n=new Image;n.addEventListener("load",(()=>{r&&clearTimeout(r),a({width:n.naturalWidth,height:n.naturalHeight})})),n.addEventListener("error",(e=>{r&&clearTimeout(r),l("".concat(e.type,": ").concat(e.message))})),n.src=e,t&&(r=setTimeout((()=>l(o)),t))}))}}]);