"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[216],{79880:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var n=a(1413),r=a(15861),o=a(15671),s=a(43144),i=a(79340),l=a(48347),u=a(87757),c=a.n(u),p=a(47313),d=a(2651),h=a(46417),m=function(e){(0,i.Z)(a,e);var t=(0,l.Z)(a);function a(){return(0,o.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.dataArr,r=t.completeDataObject,o=t.cardWidth,s=t.handleAllImageError;return(0,h.jsx)("div",{className:"ts_ms_post_row",children:a&&a.length>0?a&&a.length>0?a.map((function(t,a){var i=r[t];return(0,h.jsx)(d.Z,(0,n.Z)({handleAllImageError:s,className:"ts_ms_post_wrapper",itemData:i,cardWidth:o,fullWidth:!1,itemId:i.id},e.props),"post_idMs_".concat(a))})):null:""})}}]),a}(p.PureComponent),f=a(8354),D=a(17739),w=a(73763),g=(0,p.lazy)((function(){return Promise.all([a.e(874),a.e(885),a.e(771)]).then(a.bind(a,54771))})),v=function(e){(0,i.Z)(a,e);var t=(0,l.Z)(a);function a(){var e;(0,o.Z)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).allImageQueue=[],e.state={data:[],cardWidth:null,loadMore:!1,allFirstImage:!1,showSlides:!0,isMobile:!1},e.onUpdateData=function(){setTimeout((function(){return e.requestData()}),1e3)},e.requestData=function(){var t=e.props,a=t.wall,n=t.appendData,r=t.hasMoreData,o=t.loaderData,s=a.ThemeRule.numberOfPosts,i=Math.floor(Date.now()/1e3);r&&!o.isShowMoreLoading&&e.props.getDataNextSteps(a.Wall.id,i,s,n.networkID,n.after,n.heightEvent)},e.onSliderDataFormation=function(t){var a=t.wall,n=t.postData,r=a.ThemeRule.multiRow,o=(0,D.td)(n,r);e.setState({data:o})},e.preloadImages=function(){var t=(0,r.Z)(c().mark((function t(a){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a&&a.length&&a.forEach(function(){var t=(0,r.Z)(c().mark((function t(a){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.completeDataObject[a],t.next=3,e.preloadImage(n.postFileNew);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.preloadImage=function(e){return new Promise((function(t,a){var n=new Image;n.src=e,n.style.display="none",n.onload=function(){document.body.removeChild(n),t()},n.onerror=a,document.body.appendChild(n)}))},e.handleAllImageError=function(t){try{var a=t.target.getAttribute("data-item-id");e.allImageQueue.push({src:a,e:t}),e.state.allFirstImage||e.processAllImageQueue()}catch(n){}},e.processAllImageQueue=(0,r.Z)(c().mark((function t(){var a,n,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.allImageQueue.length&&(e.setState({allFirstImage:!0}),a=e.allImageQueue[0],n=a.src,r=a.e,n&&(0,D.bO)(r,e.nextProcessAllImageQueue));case 1:case"end":return t.stop()}}),t)}))),e.nextProcessAllImageQueue=function(){try{e.allImageQueue.shift(),e.processAllImageQueue()}catch(t){}},e.DetectIphone=function(){var t=navigator.userAgent.toLowerCase();t.search("iphone")>-1||t.search("android")>-1?e.setState({isMobile:!0}):e.setState({isMobile:!1})},e}return(0,s.Z)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.setState({loadMore:!0})}),500),this.DetectIphone(),this.preloadImages(this.props.postData),this.onSliderDataFormation(this.props)}},{key:"render",value:function(){var e,t=this,a=this.props,r=a.postData,o=a.hasMoreData,s=a.wall,i=a.loaderData,l=a.newPostData,u=s.ThemeRule.numberOfCoumn,c=s.ThemeRule.mobileColumn,d=this.props.appData.wall.User.id,f={2400:{slidesPerView:"".concat(0===u?9:u)},2200:{slidesPerView:"".concat(0===u?8:u)},1800:{slidesPerView:"".concat(0===u?7:u)},1500:{slidesPerView:"".concat(0===u?6:u)},1367:{slidesPerView:"".concat(0===u?5:u)},1200:{slidesPerView:"".concat(0===u?4:u)},768:{slidesPerView:"".concat(0===u?3:u)},576:{slidesPerView:"".concat(0===u?2:u)},0:{slidesPerView:"".concat(0===c?1:c)}};return(0,h.jsx)("div",{className:"ts_ms_post_container",id:"ts_theme_container ",style:this.state.showSlides?{}:{visibility:"hidden"},children:(16677===d&&"product"===window.dataFilterType?r&&r.length>=5:r&&r.length)?(0,h.jsx)(p.Suspense,{fallback:(0,h.jsx)("div",{children:"Loading..."}),children:(0,h.jsx)(g,{autoplay:"".concat(1==s.ThemeRule.slidePost),"slides-per-view":"".concat(0===u?6:u),navigation:JSON.stringify({nextEl:".swiper-button-next",prevEl:".swiper-button-prev",disabledClass:"swiper-button-none"}),breakpoints:JSON.stringify(f),"css-mode":this.state.isMobile,"passive-listeners":!1,"long-swipes-ratio":.01,"long-swipes-ms":100,hasMoreData:o,loaderData:i,onUpdateData:this.onUpdateData,children:l&&l.length>0?137350===(null===s||void 0===s||null===(e=s.User)||void 0===e?void 0:e.id)?r&&r.length>3?l.map((function(e,a){return(0,h.jsx)("swiper-slide",{children:(0,h.jsx)(m,(0,n.Z)({handleAllImageError:t.handleAllImageError,dataArr:e},t.props),"post_id_ms-1-{index}")},"mn-1-".concat(a))})):null:l.map((function(e,a){return(0,h.jsx)("swiper-slide",{children:(0,h.jsx)(m,(0,n.Z)({handleAllImageError:t.handleAllImageError,dataArr:e},t.props),"post_id_ms-2-".concat(a))},"mn-2-".concat(a))})):null})}):null})}}]),a}(p.PureComponent),I=(0,f.$j)((function(e){var t=e.appData;return{appData:t,loaderData:e.loaderData,newPostData:t.newPostData,appendData:t.postData.appendData,hasMoreData:!t.postData.hasMoreData[0]||!1!==t.postData.hasMoreData[0].hasMoreData&&(!t.postData.hasMoreData[t.postData.appendData.networkID]||t.postData.hasMoreData[t.postData.appendData.networkID].hasMoreData)}}),(function(e){return{getDataNextSteps:function(t,a,n,r,o,s,i){return e((0,w.Sx)(t,a,n,r,o,s,i))},showPopUP:function(t){return e((0,w.Bm)(t))}}}))(v)},85942:function(e,t,a){a.d(t,{Z:function(){return n}});var n=function(e,t){return new Promise((function(a,n){var r=null,o=new Image;o.addEventListener("load",(function(){r&&clearTimeout(r),a(o)})),o.addEventListener("error",(function(e){r&&clearTimeout(r),n("".concat(e.type,": ").concat(e.message))})),o.src=e,t&&(r=setTimeout((function(){return n("Timeout exception")}),t))}))}}}]);