"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[4045],{18099:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var s=a(47313),l=a(2651),r=a(46417);class o extends s.PureComponent{render(){const{dataArr:t,indexNo:e,completeDataObject:a,wall:s,webFilters:o,languageSetting:i,cardWidth:n,largeDiv:h,smallDiv:d,handleAllImageError:c}=this.props,m=s.ThemeRule.highlightPosition,u=e%2,p={width:h+"%",float:"0"==u?"right"==m?"right":"left":"right"==m?"left":"right"},g={width:d+"%",float:"right"==m?"left":"right"};return(0,r.jsx)("div",{className:"ts_cs_post_row",children:t&&t.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"ts_cs_post_large",style:p,children:[" ",(0,r.jsx)(l.Z,{className:"ts_ct_post_wrapper",itemData:a[t[0]],cardWidth:n,itemId:a[t[0]].id,fullWidth:!0,...this.props})," "]}),(0,r.jsxs)("div",{className:"ts_cs_post_small",style:g,children:[t&&t.length>0?t.map(((t,e)=>{const s=a[t];return 0==e?"":(0,r.jsx)(l.Z,{className:"ts_ct_post_wrapper",itemData:s,handleAllImageError:c,cardWidth:n,fullWidth:!1,itemId:s.id,...this.props},"post_id_".concat(s.id,"_").concat(e))})):null," "]})]}):""})}}var i=a(17739),n=a(73763),h=a(59204);class d extends s.PureComponent{constructor(){super(...arguments),this.allImageQueue=[],this.state={cardWidth:null,largeDiv:null,smallDiv:null,allFirstImage:!1},this.requestData=()=>{const{wall:t,postData:e,appendData:a,hasMoreData:s,loaderData:l}=this.props,r=t.Personalization.numberOfPosts,o=Math.floor(Date.now()/1e3);s&&!l.isShowMoreLoading&&this.props.getDataNextSteps(t.Wall.id,o,r,a.networkID,a.after,a.heightEvent)},this.onCollageDataFormation=t=>{const{wall:e,postData:a}=t;var s=document.querySelector(".taggshopContainer")?document.querySelector(".taggshopContainer").clientWidth:"";const l=e.ThemeRule.numberOfCoumn,{cardWidth:r,largeDiv:o,smallDiv:n}=(0,i.xi)(s,l,e.Personalization.commerceTheme);this.setState({cardWidth:r,largeDiv:o,smallDiv:n})},this.handleAllImageError=t=>{try{const e=t.target.getAttribute("data-item-id");this.allImageQueue.push({src:e,e:t}),this.state.allFirstImage||this.processAllImageQueue()}catch(e){}},this.processAllImageQueue=()=>{if(this.allImageQueue.length){this.setState({allFirstImage:!0});const{src:t,e:e}=this.allImageQueue[0];t&&(0,i.bO)(e,this.nextProcessAllImageQueue)}},this.nextProcessAllImageQueue=()=>{try{this.allImageQueue.shift(),this.processAllImageQueue()}catch(t){}}}componentDidMount(){this.onCollageDataFormation(this.props);const{wall:t,postData:e,appendData:a}=this.props;document.getElementById("scrlBarComanW");a&&t.Personalization.autoScrollStatus&&window.addEventListener("scroll",(t=>{let e=document.getElementById("scrlBarComanW");document.body.scrollHeight;var a=window.innerHeight+window.scrollY;e.scrollHeight-10<a&&setTimeout((()=>this.requestData()),1e3)}))}render(){const{data:t,cardWidth:e,largeDiv:a,smallDiv:s}=this.state,{postData:l,completeDataObject:n,adjustWidth:h,wall:d,webFilters:c,languageSetting:m,newPostData:u}=this.props;return(0,r.jsx)("div",{className:"tb_sc_post_container",id:"ts_theme_container",children:u&&u.length>0?u.map(((t,l)=>(i.j6&&u&&u.length-1==l&&setTimeout((()=>{let t=document.querySelectorAll("img[data-is-optmized='0']");t&&t.length>0&&t.forEach((t=>{t.setAttribute("src",t.getAttribute("data-src")),t.setAttribute("data-is-optmized","1")}))}),1300),t.length==d.ThemeRule.numberOfCoumn?(0,r.jsx)(o,{dataArr:t,handleAllImageError:this.handleAllImageError,indexNo:l,...this.props,cardWidth:e,largeDiv:a,smallDiv:s},"post_id_".concat(l)):""))):null})}}const c=(0,h.$j)((t=>{const{appData:e}=t;return{appData:e,loaderData:t.loaderData,newPostData:e.newPostData,appendData:e.postData.appendData,hasMoreData:!e.postData.hasMoreData[0]||0!=e.postData.hasMoreData[0].hasMoreData&&(!e.postData.hasMoreData[e.postData.appendData.networkID]||e.postData.hasMoreData[e.postData.appendData.networkID].hasMoreData)}}),(t=>({getDataNextSteps:(e,a,s,l,r,o,i)=>t((0,n.Sx)(e,a,s,l,r,o,i))})))(d)},34041:(t,e,a)=>{a.d(e,{Z:()=>r});const s="Window variable not found",l="Timeout exception",r=(t,e)=>new Promise(((a,r)=>{if("undefined"===typeof window)return r(s);let o=null;const i=new Image;i.addEventListener("load",(()=>{o&&clearTimeout(o),a({width:i.naturalWidth,height:i.naturalHeight})})),i.addEventListener("error",(t=>{o&&clearTimeout(o),r("".concat(t.type,": ").concat(t.message))})),i.src=t,e&&(o=setTimeout((()=>r(l)),e))}))}}]);