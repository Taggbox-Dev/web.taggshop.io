"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[463,519],{50519:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var a=s(47313),i=s(59204),n=s(73763),o=s(46417);const r=(0,a.lazy)((()=>s.e(914).then(s.bind(s,97914)))),l=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase());class c extends a.PureComponent{constructor(){super(...arguments),this.state={isOpen:!1,step:1,wall_id:null,name:null,email:null,upload_image:[],receiveMail:!1,tandc:!0,nameError:!1,emailError:!1},this.onShowCloseSubmitPicPopUp=()=>{const{wall:t}=this.props;this.props.showPopUP({type:"submit-pic",card:{},personalization:t.Personalization,ThemeRule:t.ThemeRule,UserRule:t.UserRule,wall:t})},this.updateImageWithData=t=>{const{upload_image:e}=this.state;e&&e.length<5&&(e.push(t),this.setState({upload_image:e}))},this.onUpdateImageAddCaption=t=>e=>{const{upload_image:s}=this.state;s&&s.length>0&&s[t]&&(s[t].caption=e.target.value,s[t].review="",s[t].rating=0,this.setState({upload_image:s}))},this.onUpdateImageAddReview=t=>e=>{const{upload_image:s}=this.state;s&&s.length>0&&s[t]&&(s[t].review=e.target.value,s[t].caption="",this.setState({upload_image:s}))},this.onUpdateImageAddRatings=(t,e)=>{const{upload_image:s}=this.state;s&&s.length>0&&s[e]&&(s[e].caption="",s[e].rating=t,this.setState({upload_image:s}))},this.onUpdateStep=t=>()=>{this.setState({step:t})},this.onTextName=t=>{this.setState({name:t.target.value,nameError:!1},(()=>{null!=this.state.name&&0!=this.state.name.length||this.setState({nameError:!0})}))},this.onTextEmail=t=>{this.setState({email:t.target.value,emailError:!1},(()=>{null!=this.state.email&&0!=this.state.email.length&&l(this.state.email)&&!this.state.email.includes("mailinator")||this.setState({emailError:!0})}))},this.onSubmitData=()=>{const{name:t,email:e,upload_image:s,tandc:a,receiveMail:i}=this.state,{wallId:o}=this.props;a&&t&&t.length>0&&e&&e.length>0&&l(e)&&!e.includes("mailinator")&&s&&s.length>0&&a?(0,n.uM)({wall_id:o,name:t,email:e,upload_image:s,receive_mail:i}).then((()=>{this.setState({step:3})})).catch((t=>{console.error(t)})):(null!=this.state.name&&0!=this.state.name.length||this.setState({nameError:!0}),null!=this.state.email&&0!=this.state.email.length&&l(this.state.email)&&!e.includes("mailinator")||this.setState({emailError:!0}))},this.onUpdatereceiveMail=()=>{const{receiveMail:t}=this.state;this.setState({receiveMail:!t})},this.onUpdatetandc=()=>{const{tandc:t}=this.state;this.setState({tandc:!t})},this.removeProductImage=t=>()=>{const{upload_image:e}=this.state;e&&e.length>0&&e.splice(t,1),this.setState({upload_image:e})}}render(){const{wall:t}=this.props,e=t.UgcSettings,s=e.onsite_status?{backgroundColor:e.onsite_btn_color,borderColor:e.onsite_btn_color,color:e.onsite_btn_txt_color}:"",i={fontSize:t.UgcSettings.btn_fontSize+"px",fontFamily:t.UgcSettings.onsite_css_font_btn};return(0,o.jsx)(o.Fragment,{children:0!==e.onsite_status?(0,o.jsx)("div",{id:"tb_post_submit_container_button",className:"50"!=t.Personalization.commerceTheme?"tb_post_submit_container":"ts_gst__post_submit_container_button",children:"50"!=t.Personalization.commerceTheme?(0,o.jsx)("div",{className:"btn-scan",children:(0,o.jsxs)("div",{style:s,className:"tb_post_submit_btn",onClick:this.onShowCloseSubmitPicPopUp,children:[1==t.UgcSettings.onsite_qr_code_status?(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsx)("div",{className:"qr-image",children:(0,o.jsx)(a.Suspense,{fallback:null,children:(0,o.jsx)(r,{level:"L",size:60,value:t.UgcSettings.onsite_popup_url})})})]}):null,e.onsite_qr_code_btn_text?(0,o.jsxs)(o.Fragment,{children:[1==t.UgcSettings.onsite_qr_code_status?(0,o.jsx)("div",{className:"ts__qr_separator",children:(0,o.jsx)("div",{})}):"",(0,o.jsx)("div",{className:"ts_qr-text  tb-cTSfont-".concat(t.UgcSettings.onsite_font_varient_btn),style:i,children:(0,o.jsx)("div",{className:"ts_qr-text_wrap tb-cTSfont-".concat(t.UgcSettings.onsite_font_varient_btn),style:i,children:e.onsite_qr_code_status&&e.onsite_status||e.onsite_qr_code_status?e.onsite_qr_code_btn_text:e.onsite_status?e.onsite_btn_txt:"Submit a Post"})})," "]}):""]})}):(0,o.jsx)("div",{className:"ts_gst_btn-scan",style:s,children:(0,o.jsxs)("div",{className:"ts_gst_post_submit_btn",onClick:this.onShowCloseSubmitPicPopUp,children:[(0,o.jsxs)("div",{className:"ts_gst_qr-image",children:["1"==t.UgcSettings.onsite_qr_code_status?(0,o.jsx)("div",{style:{backgroundColor:"white",padding:"4.5px",width:"70px",height:"70px",marginLeft:"auto",marginRight:"auto"},children:(0,o.jsx)(a.Suspense,{fallback:null,children:(0,o.jsx)(r,{level:"L",size:60,value:t.UgcSettings.onsite_popup_url})})}):"",(0,o.jsx)("div",{className:"ts_gst_qr-text  tb-cTSfont-".concat(t.UgcSettings.font_varient),style:i,children:(0,o.jsx)("div",{className:"ts_gst_qr-text_wrap ".concat("1"==t.UgcSettings.onsite_qr_code_status?"wt_qrcode":"wo_qrcode"),children:e.onsite_qr_code_status&&e.onsite_status||e.onsite_qr_code_status?e.onsite_qr_code_btn_text:e.onsite_status?e.onsite_btn_txt:"Submit a Post"})})]}),(0,o.jsx)("div",{className:"ts_gst_qr-image_mobile",children:"Add Your Photo"})]})})}):""})}}const d=(0,i.$j)((t=>({wallId:t.appData.wallID})),(t=>({showPopUP:e=>t((0,n.Bm)(e))})))(c)},33599:(t,e,s)=>{s.r(e),s.d(e,{default:()=>m});var a=s(47313),i=s(50519),n=s(2651),o=s(46417);class r extends a.PureComponent{render(){const{dataArr:t,indexNo:e,completeDataObject:s,wall:a,onSiteUploadShow:r,cardWidth:l,largeDiv:c,smallDiv:d,handleAllImageError:h}=this.props,m=a.ThemeRule.highlightPosition,p=e<3?"1":"0",u={width:c+"%",float:"0"==p?"right"==m?"right":"left":"right"==m?"left":"right"},_={width:d+"%",float:"right"==m?"left":"right"};return(0,o.jsx)("div",{className:"ts_gs_post_row",children:t&&t.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"ts_gs_post_large",style:u,children:[" ",(0,o.jsx)(n.Z,{className:"ts_gs_post_wrapper",itemData:s[t[0]],cardWidth:l,itemId:s[t[0]].id,fullWidth:!0,...this.props})," "]}),(0,o.jsxs)("div",{className:"ts_gs_post_small",style:_,children:[r?(0,o.jsx)(i.default,{isGalleryTheme:!1,wall:a}):"",t&&t.length>0?t.map(((t,e)=>{const a=s[t];return 0==e?"":(0,o.jsx)(n.Z,{className:"ts_gs_post_wrapper",itemData:a,handleAllImageError:h,cardWidth:l,fullWidth:!1,itemId:a.id,...this.props},"post_id_".concat(a.id))})):null," "]})]}):""})}}var l=s(17739),c=s(73763),d=s(59204);(0,s(12488).z2)();class h extends a.PureComponent{constructor(){super(...arguments),this.allImageQueue=[],this.state={cardWidth:null,largeDiv:null,smallDiv:null,allFirstImage:!1},this.requestData=()=>{const{wall:t,appendData:e,hasMoreData:s,loaderData:a}=this.props,i=t.ThemeRule.numberOfPosts,n=Math.floor(Date.now()/1e3);s&&!a.isShowMoreLoading&&this.props.getDataNextSteps(t.Wall.id,n,i,e.networkID,e.after,e.heightEvent)},this.onCollageDataFormation=t=>{const{wall:e}=t;var s=document.querySelector(".taggshopContainer")?document.querySelector(".taggshopContainer").clientWidth:"";const a=e.ThemeRule.numberOfCoumn,{cardWidth:i,largeDiv:n,smallDiv:o}=(0,l.nf)(s,a,e.Personalization.commerceTheme);this.setState({cardWidth:i,largeDiv:n,smallDiv:o})},this.onUpdateData=()=>{setTimeout((()=>this.requestData()),1e3)},this.handleAllImageError=t=>{try{const e=t.target.getAttribute("data-item-id");this.allImageQueue.push({src:e,e:t}),this.state.allFirstImage||this.processAllImageQueue()}catch(e){}},this.processAllImageQueue=async()=>{if(this.allImageQueue.length){this.setState({allFirstImage:!0});const{src:t,e:e}=this.allImageQueue[0];t&&(0,l.bO)(e,this.nextProcessAllImageQueue)}},this.nextProcessAllImageQueue=()=>{try{this.allImageQueue.shift(),this.processAllImageQueue()}catch(t){}}}componentDidMount(){this.onCollageDataFormation(this.props);const{wall:t,appendData:e}=this.props;e&&t.Personalization.autoScrollStatus&&window.addEventListener("scroll",(()=>{let t=document.getElementById("scrlBarComanW");var e=window.innerHeight+window.scrollY;t.scrollHeight-10<e&&setTimeout((()=>this.requestData()),1e3)}))}render(){const{cardWidth:t}=this.state,{wall:e,newPostData:s,loaderData:a,hasMoreData:i}=this.props,n=e.UserRule.on_site_upload&&(!window.isEditor||(0,l.G)());return(0,o.jsxs)("div",{className:"tb_gst_post_container",id:"ts_theme_container",children:[(0,o.jsx)("swiper-container",{ref:this.secondaryRef,autoplay:"".concat(1===e.ThemeRule.slidePost),"slides-per-view":"2.5",navigation:JSON.stringify({nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}),children:s&&s.length>0?s.map(((e,s)=>{const a=0===s&&n&&2===e.length;return 3===e.length||a?(0,o.jsx)("swiper-slide",{children:(0,o.jsx)(r,{dataArr:e,handleAllImageError:this.handleAllImageError,onSiteUploadShow:a,indexNo:s<6?s:"0",...this.props,cardWidth:t,largeDiv:66.66,smallDiv:33.33},"post_id_".concat(s))},"splide_Id".concat(s)):""})):null}),(0,o.jsx)("div",{className:"swiper-button-prev swiper__arrow--prev ts_slider_arrow-prev",children:(0,o.jsx)("div",{className:"swiperArrow_inner",children:(0,o.jsx)("div",{className:"tb__icon tb-chevron-left",children:(0,o.jsx)("div",{})})})}),(0,o.jsx)("div",{className:"swiper-button-next swiper__arrow--next ts_slider_arrow-next",onClick:i&&a.isShowMoreLoading?null:this.onUpdateData,children:i&&a.isShowMoreLoading?(0,o.jsxs)("svg",{width:"26px",height:"26px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"uil-ring-alt",children:[(0,o.jsx)("rect",{x:"0",y:"0",width:"100",height:"100",fill:"none",className:"bk"}),(0,o.jsx)("circle",{cx:"50",cy:"50",r:"40",stroke:"#afafb7",fill:"none",strokeWidth:"10",strokeLinecap:"round"}),(0,o.jsxs)("circle",{cx:"50",cy:"50",r:"40",stroke:"#000000",fill:"none",strokeWidth:"6",strokeLinecap:"round",children:[(0,o.jsx)("animate",{attributeName:"stroke-dashoffset",dur:"2s",repeatCount:"indefinite",from:"0",to:"502"}),(0,o.jsx)("animate",{attributeName:"stroke-dasharray",dur:"2s",repeatCount:"indefinite",values:"150.6 100.4;1 250;150.6 100.4"})]})]}):(0,o.jsx)("div",{className:"swiperArrow_inner",children:(0,o.jsx)("div",{className:"tb__icon tb-chevron-right",children:(0,o.jsx)("div",{})})})})]})}}const m=(0,d.$j)((t=>{const{appData:e}=t;return{appData:e,loaderData:t.loaderData,newPostData:e.newPostData,appendData:e.postData.appendData,hasMoreData:!e.postData.hasMoreData[0]||!1!==e.postData.hasMoreData[0].hasMoreData&&(!e.postData.hasMoreData[e.postData.appendData.networkID]||e.postData.hasMoreData[e.postData.appendData.networkID].hasMoreData)}}),(t=>({getDataNextSteps:(e,s,a,i,n,o,r)=>t((0,c.Sx)(e,s,a,i,n,o,r)),showPopUP:e=>t((0,c.Bm)(e))})))(h)},34041:(t,e,s)=>{s.d(e,{Z:()=>n});const a="Window variable not found",i="Timeout exception",n=(t,e)=>new Promise(((s,n)=>{if("undefined"===typeof window)return n(a);let o=null;const r=new Image;r.addEventListener("load",(()=>{o&&clearTimeout(o),s({width:r.naturalWidth,height:r.naturalHeight})})),r.addEventListener("error",(t=>{o&&clearTimeout(o),n("".concat(t.type,": ").concat(t.message))})),r.src=t,e&&(o=setTimeout((()=>n(i)),e))}))}}]);