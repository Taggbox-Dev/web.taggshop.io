"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[519],{50519:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});var a=s(47313),i=s(59204),n=s(73763),o=s(46417);const l=(0,a.lazy)((()=>s.e(914).then(s.bind(s,97914)))),r=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase());class c extends a.PureComponent{constructor(){super(...arguments),this.state={isOpen:!1,step:1,wall_id:null,name:null,email:null,upload_image:[],receiveMail:!1,tandc:!0,nameError:!1,emailError:!1},this.onShowCloseSubmitPicPopUp=()=>{const{wall:t}=this.props;this.props.showPopUP({type:"submit-pic",card:{},personalization:t.Personalization,ThemeRule:t.ThemeRule,UserRule:t.UserRule,wall:t})},this.updateImageWithData=t=>{const{upload_image:e}=this.state;e&&e.length<5&&(e.push(t),this.setState({upload_image:e}))},this.onUpdateImageAddCaption=t=>e=>{const{upload_image:s}=this.state;s&&s.length>0&&s[t]&&(s[t].caption=e.target.value,s[t].review="",s[t].rating=0,this.setState({upload_image:s}))},this.onUpdateImageAddReview=t=>e=>{const{upload_image:s}=this.state;s&&s.length>0&&s[t]&&(s[t].review=e.target.value,s[t].caption="",this.setState({upload_image:s}))},this.onUpdateImageAddRatings=(t,e)=>{const{upload_image:s}=this.state;s&&s.length>0&&s[e]&&(s[e].caption="",s[e].rating=t,this.setState({upload_image:s}))},this.onUpdateStep=t=>()=>{this.setState({step:t})},this.onTextName=t=>{this.setState({name:t.target.value,nameError:!1},(()=>{null!=this.state.name&&0!=this.state.name.length||this.setState({nameError:!0})}))},this.onTextEmail=t=>{this.setState({email:t.target.value,emailError:!1},(()=>{null!=this.state.email&&0!=this.state.email.length&&r(this.state.email)&&!this.state.email.includes("mailinator")||this.setState({emailError:!0})}))},this.onSubmitData=()=>{const{name:t,email:e,upload_image:s,tandc:a,receiveMail:i}=this.state,{wallId:o}=this.props;a&&t&&t.length>0&&e&&e.length>0&&r(e)&&!e.includes("mailinator")&&s&&s.length>0&&a?(0,n.uM)({wall_id:o,name:t,email:e,upload_image:s,receive_mail:i}).then((()=>{this.setState({step:3})})).catch((t=>{console.error(t)})):(null!=this.state.name&&0!=this.state.name.length||this.setState({nameError:!0}),null!=this.state.email&&0!=this.state.email.length&&r(this.state.email)&&!e.includes("mailinator")||this.setState({emailError:!0}))},this.onUpdatereceiveMail=()=>{const{receiveMail:t}=this.state;this.setState({receiveMail:!t})},this.onUpdatetandc=()=>{const{tandc:t}=this.state;this.setState({tandc:!t})},this.removeProductImage=t=>()=>{const{upload_image:e}=this.state;e&&e.length>0&&e.splice(t,1),this.setState({upload_image:e})}}render(){const{wall:t}=this.props,e=t.UgcSettings,s=e.onsite_status?{backgroundColor:e.onsite_btn_color,borderColor:e.onsite_btn_color,color:e.onsite_btn_txt_color}:"",i={fontSize:t.UgcSettings.btn_fontSize+"px",fontFamily:t.UgcSettings.onsite_css_font_btn};return(0,o.jsx)(o.Fragment,{children:0!==e.onsite_status?(0,o.jsx)("div",{id:"tb_post_submit_container_button",className:"50"!=t.Personalization.commerceTheme?"tb_post_submit_container":"ts_gst__post_submit_container_button",children:"50"!=t.Personalization.commerceTheme?(0,o.jsx)("div",{className:"btn-scan",children:(0,o.jsxs)("div",{style:s,className:"tb_post_submit_btn",onClick:this.onShowCloseSubmitPicPopUp,children:[1==t.UgcSettings.onsite_qr_code_status?(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsx)("div",{className:"qr-image",children:(0,o.jsx)(a.Suspense,{fallback:null,children:(0,o.jsx)(l,{level:"L",size:60,value:t.UgcSettings.onsite_popup_url})})})]}):null,e.onsite_qr_code_btn_text?(0,o.jsxs)(o.Fragment,{children:[1==t.UgcSettings.onsite_qr_code_status?(0,o.jsx)("div",{className:"ts__qr_separator",children:(0,o.jsx)("div",{})}):"",(0,o.jsx)("div",{className:"ts_qr-text  tb-cTSfont-".concat(t.UgcSettings.onsite_font_varient_btn),style:i,children:(0,o.jsx)("div",{className:"ts_qr-text_wrap tb-cTSfont-".concat(t.UgcSettings.onsite_font_varient_btn),style:i,children:e.onsite_qr_code_status&&e.onsite_status||e.onsite_qr_code_status?e.onsite_qr_code_btn_text:e.onsite_status?e.onsite_btn_txt:"Submit a Post"})})," "]}):""]})}):(0,o.jsx)("div",{className:"ts_gst_btn-scan",style:s,children:(0,o.jsxs)("div",{className:"ts_gst_post_submit_btn",onClick:this.onShowCloseSubmitPicPopUp,children:[(0,o.jsxs)("div",{className:"ts_gst_qr-image",children:["1"==t.UgcSettings.onsite_qr_code_status?(0,o.jsx)("div",{style:{backgroundColor:"white",padding:"4.5px",width:"70px",height:"70px",marginLeft:"auto",marginRight:"auto"},children:(0,o.jsx)(a.Suspense,{fallback:null,children:(0,o.jsx)(l,{level:"L",size:60,value:t.UgcSettings.onsite_popup_url})})}):"",(0,o.jsx)("div",{className:"ts_gst_qr-text  tb-cTSfont-".concat(t.UgcSettings.font_varient),style:i,children:(0,o.jsx)("div",{className:"ts_gst_qr-text_wrap ".concat("1"==t.UgcSettings.onsite_qr_code_status?"wt_qrcode":"wo_qrcode"),children:e.onsite_qr_code_status&&e.onsite_status||e.onsite_qr_code_status?e.onsite_qr_code_btn_text:e.onsite_status?e.onsite_btn_txt:"Submit a Post"})})]}),(0,o.jsx)("div",{className:"ts_gst_qr-image_mobile",children:"Add Your Photo"})]})})}):""})}}const _=(0,i.$j)((t=>({wallId:t.appData.wallID})),(t=>({showPopUP:e=>t((0,n.Bm)(e))})))(c)}}]);