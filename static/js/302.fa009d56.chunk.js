"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[302,538,463],{37463:function(t,e,a){a.r(e),a.d(e,{default:function(){return l}});var n=a(1413),r=a(45987),i=(a(47313),a(12488)),s=(a(9223),a(46417)),o=["children"];(0,i.z2)();var l=function(t){var e=t.children,a=(0,r.Z)(t,o);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("swiper-container",(0,n.Z)((0,n.Z)({"auto-height":"true","watch-overflow":!1},a),{},{children:e})),a.showCustomArrow?a.customArrow:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"swiper-button-prev swiper__arrow--prev ts_slider_arrow-prev",children:(0,s.jsx)("div",{className:"swiperArrow_inner",children:(0,s.jsx)("div",{className:"tb__icon tb-chevron-left",children:(0,s.jsx)("div",{})})})}),(0,s.jsx)("div",{className:"swiper-button-next swiper__arrow--next ts_slider_arrow-next",onClick:a.hasMoreData&&a.loaderData.isShowMoreLoading?null:a.onUpdateData,children:a.hasMoreData&&a.loaderData.isShowMoreLoading?(0,s.jsxs)("svg",{width:"26px",height:"26px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"uil-ring-alt",children:[(0,s.jsx)("rect",{x:"0",y:"0",width:"100",height:"100",fill:"none",className:"bk"}),(0,s.jsx)("circle",{cx:"50",cy:"50",r:"40",stroke:"#afafb7",fill:"none",strokeWidth:"10",strokeLinecap:"round"}),(0,s.jsxs)("circle",{cx:"50",cy:"50",r:"40",stroke:"#000000",fill:"none",strokeWidth:"6",strokeLinecap:"round",children:[(0,s.jsx)("animate",{attributeName:"stroke-dashoffset",dur:"2s",repeatCount:"indefinite",from:"0",to:"502"}),(0,s.jsx)("animate",{attributeName:"stroke-dasharray",dur:"2s",repeatCount:"indefinite",values:"150.6 100.4;1 250;150.6 100.4"})]})]}):(0,s.jsx)("div",{className:"swiperArrow_inner",children:(0,s.jsx)("div",{className:"tb__icon tb-chevron-right",children:(0,s.jsx)("div",{})})})})]})]})}},66538:function(t,e,a){a.r(e);var n=a(15671),r=a(43144),i=a(79340),s=a(48347),o=a(47313),l=a(8354),c=a(73763),u=a(97914),d=a(46417),m=function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())},p=function(t){(0,i.Z)(a,t);var e=(0,s.Z)(a);function a(){var t;(0,n.Z)(this,a);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).state={isOpen:!1,step:1,wall_id:null,name:null,email:null,upload_image:[],receiveMail:!1,tandc:!0,nameError:!1,emailError:!1},t.onShowCloseSubmitPicPopUp=function(e){var a=t.props,n=(a.appendData,a.wall);t.props.showPopUP({type:"submit-pic",card:{},personalization:n.Personalization,ThemeRule:n.ThemeRule,UserRule:n.UserRule,wall:n})},t.updateImageWithData=function(e){var a=t.state.upload_image;a&&a.length<5&&(a.push(e),t.setState({upload_image:a}))},t.onUpdateImageAddCaption=function(e){return function(a){var n=t.state.upload_image;n&&n.length>0&&n[e]&&(n[e].caption=a.target.value,n[e].review="",n[e].rating=0,t.setState({upload_image:n}))}},t.onUpdateImageAddReview=function(e){return function(a){var n=t.state.upload_image;n&&n.length>0&&n[e]&&(n[e].review=a.target.value,n[e].caption="",t.setState({upload_image:n}))}},t.onUpdateImageAddRatings=function(e,a){var n=t.state.upload_image;n&&n.length>0&&n[a]&&(n[a].caption="",n[a].rating=e,t.setState({upload_image:n}))},t.onUpdateStep=function(e){return function(a){t.setState({step:e})}},t.onTextName=function(e){t.setState({name:e.target.value,nameError:!1},(function(){null!=t.state.name&&0!=t.state.name.length||t.setState({nameError:!0})}))},t.onTextEmail=function(e){t.setState({email:e.target.value,emailError:!1},(function(){null!=t.state.email&&0!=t.state.email.length&&m(t.state.email)&&!t.state.email.includes("mailinator")||t.setState({emailError:!0})}))},t.onSubmitData=function(e){var a=t.state,n=a.name,r=a.email,i=a.upload_image,s=a.tandc,o=a.receiveMail,l=t.props.wallId;s&&n&&n.length>0&&r&&r.length>0&&m(r)&&!r.includes("mailinator")&&i&&i.length>0&&s?(0,c.uM)({wall_id:l,name:n,email:r,upload_image:i,receive_mail:o}).then((function(e){t.setState({step:3})})).catch((function(t){console.error(t)})):(null!=t.state.name&&0!=t.state.name.length||t.setState({nameError:!0}),null!=t.state.email&&0!=t.state.email.length&&m(t.state.email)&&!r.includes("mailinator")||t.setState({emailError:!0}))},t.onUpdatereceiveMail=function(e){var a=t.state.receiveMail;t.setState({receiveMail:!a})},t.onUpdatetandc=function(e){var a=t.state.tandc;t.setState({tandc:!a})},t.removeProductImage=function(e){return function(a){var n=t.state.upload_image;n&&n.length>0&&n.splice(e,1),t.setState({upload_image:n})}},t}return(0,r.Z)(a,[{key:"render",value:function(){var t=this.state,e=(t.isOpen,t.upload_image,t.step,t.name,t.email,t.receiveMail,t.tandc,t.nameError,t.emailError,this.props.wall),a=e.UgcSettings,n=!!a.onsite_status,r=n?{backgroundColor:a.onsite_btn_color,borderColor:a.onsite_btn_color,color:a.onsite_btn_txt_color}:"",i={fontSize:e.UgcSettings.btn_fontSize+"px",fontFamily:e.UgcSettings.onsite_css_font_btn};return(0,d.jsx)(d.Fragment,{children:n?(0,d.jsx)("div",{id:"ts_post_submit_container_button",className:"50"!=e.Personalization.commerceTheme?"ts_post_submit_container":"ts_gst__post_submit_container_button",children:"50"!=e.Personalization.commerceTheme?(0,d.jsx)("div",{className:"btn-scan",children:(0,d.jsxs)("div",{style:r,className:"ts_post_submit_btn",onClick:this.onShowCloseSubmitPicPopUp,children:[1==e.UgcSettings.onsite_qr_code_status?(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)("div",{className:"qr-image",children:(0,d.jsx)(u.Z,{level:"L",size:60,value:e.UgcSettings.onsite_popup_url})})]}):null,a.onsite_qr_code_btn_text?(0,d.jsxs)(d.Fragment,{children:[1==e.UgcSettings.onsite_qr_code_status?(0,d.jsx)("div",{className:"ts__qr_separator",children:(0,d.jsx)("div",{})}):"",(0,d.jsx)("div",{className:"ts_qr-text  tb-cTSfont-".concat(e.UgcSettings.onsite_font_varient_btn),style:i,children:(0,d.jsx)("div",{className:"ts_qr-text_wrap tb-cTSfont-".concat(e.UgcSettings.onsite_font_varient_btn),style:i,children:a.onsite_qr_code_btn_text?a.onsite_qr_code_btn_text:"Submit a Post"})})," "]}):""]})}):(0,d.jsx)("div",{className:"ts_gst_btn-scan",style:r,children:(0,d.jsxs)("div",{className:"ts_gst_post_submit_btn",onClick:this.onShowCloseSubmitPicPopUp,children:[(0,d.jsxs)("div",{className:"ts_gst_qr-image",children:["1"==e.UgcSettings.onsite_qr_code_status?(0,d.jsx)("div",{style:{backgroundColor:"white",padding:"4.5px",width:"70px",height:"70px",marginLeft:"auto",marginRight:"auto"},children:(0,d.jsx)(u.Z,{level:"L",size:60,value:e.UgcSettings.onsite_popup_url})}):"",(0,d.jsx)("div",{className:"ts_gst_qr-text  tb-cTSfont-".concat(e.UgcSettings.font_varient),style:i,children:(0,d.jsx)("div",{className:"ts_gst_qr-text_wrap ".concat("1"==e.UgcSettings.onsite_qr_code_status?"wt_qrcode":"wo_qrcode"),children:a.onsite_qr_code_status&&n||a.onsite_qr_code_status?a.onsite_qr_code_btn_text:n?a.onsite_btn_txt:"Submit a Post"})})]}),(0,d.jsx)("div",{className:"ts_gst_qr-image_mobile",children:"Add Your Photo"})]})})}):""})}}]),a}(o.Component);e.default=(0,l.$j)((function(t){return{wallId:t.appData.wallID}}),(function(t){return{showPopUP:function(e){return t((0,c.Bm)(e))}}}))(p)},33599:function(t,e,a){a.r(e),a.d(e,{default:function(){return D}});var n=a(1413),r=a(15861),i=a(15671),s=a(43144),o=a(79340),l=a(48347),c=a(87757),u=a.n(c),d=a(47313),m=a(2651),p=a(66538),h=a(46417),g=function(t){(0,o.Z)(a,t);var e=(0,l.Z)(a);function a(){return(0,i.Z)(this,a),e.apply(this,arguments)}return(0,s.Z)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.dataArr,r=e.indexNo,i=e.completeDataObject,s=e.wall,o=e.onSiteUploadShow,l=e.cardWidth,c=e.largeDiv,u=e.smallDiv,d=e.handleAllImageError,g=s.ThemeRule.highlightPosition,_=r<3?"1":"0",v={width:c+"%",float:"0"==_?"right"==g?"right":"left":"right"==g?"left":"right"},f={width:u+"%",float:"right"==g?"left":"right"};return(0,h.jsx)("div",{className:"ts_gs_post_row",children:a&&a.length>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"ts_gs_post_large",style:v,children:[" ",(0,h.jsx)(m.Z,(0,n.Z)({className:"ts_gs_post_wrapper",itemData:i[a[0]],cardWidth:l,itemId:i[a[0]].id,fullWidth:!0},this.props))," "]}),(0,h.jsxs)("div",{className:"ts_gs_post_small",style:f,children:[o?(0,h.jsx)(p.default,{isGalleryTheme:!1,wall:s}):"",a&&a.length>0?a.map((function(e,a){var r=i[e];return 0==a?"":(0,h.jsx)(m.Z,(0,n.Z)({className:"ts_gs_post_wrapper",itemData:r,handleAllImageError:d,cardWidth:l,fullWidth:!1,itemId:r.id},t.props),"post_id_".concat(r.id))})):null," "]})]}):""})}}]),a}(d.PureComponent),_=a(17739),v=a(73763),f=a(8354),w=a(37463),x=function(t){(0,o.Z)(a,t);var e=(0,l.Z)(a);function a(){var t;(0,i.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).allImageQueue=[],t.state={cardWidth:null,largeDiv:null,smallDiv:null,allFirstImage:!1},t.requestData=function(){var e=t.props,a=e.wall,n=e.appendData,r=e.hasMoreData,i=e.loaderData,s=a.ThemeRule.numberOfPosts,o=Math.floor(Date.now()/1e3);r&&!i.isShowMoreLoading&&t.props.getDataNextSteps(a.Wall.id,o,s,n.networkID,n.after,n.heightEvent)},t.onCollageDataFormation=function(e){var a=e.wall,n=document.querySelector(".taggshopContainer")?document.querySelector(".taggshopContainer").clientWidth:"",r=a.ThemeRule.numberOfCoumn,i=(0,_.nf)(n,r,a.Personalization.commerceTheme),s=i.cardWidth,o=i.largeDiv,l=i.smallDiv;t.setState({cardWidth:s,largeDiv:o,smallDiv:l})},t.onUpdateData=function(){setTimeout((function(){return t.requestData()}),1e3)},t.handleAllImageError=function(e){try{var a=e.target.getAttribute("data-item-id");t.allImageQueue.push({src:a,e:e}),t.state.allFirstImage||t.processAllImageQueue()}catch(n){}},t.processAllImageQueue=(0,r.Z)(u().mark((function e(){var a,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.allImageQueue.length&&(t.setState({allFirstImage:!0}),a=t.allImageQueue[0],n=a.src,r=a.e,n&&(0,_.bO)(r,t.nextProcessAllImageQueue));case 1:case"end":return e.stop()}}),e)}))),t.nextProcessAllImageQueue=function(){try{t.allImageQueue.shift(),t.processAllImageQueue()}catch(e){}},t}return(0,s.Z)(a,[{key:"componentDidMount",value:function(){var t=this,e=document.querySelector("swiper-container");setTimeout((function(){e.initialize()}),500),this.onCollageDataFormation(this.props);var a=this.props,n=a.wall;a.appendData&&n.Personalization.autoScrollStatus&&window.addEventListener("scroll",(function(){var e=document.getElementById("scrlBarComanW"),a=window.innerHeight+window.scrollY;e.scrollHeight-10<a&&setTimeout((function(){return t.requestData()}),1e3)}))}},{key:"render",value:function(){var t,e=this,a=this.state.cardWidth,r=this.props,i=r.wall,s=r.newPostData,o=r.loaderData,l=r.hasMoreData,c=i.UserRule.on_site_upload&&(!window.isEditor||(0,_.G)()),u=(0,_.XR)(0,0,null===i||void 0===i||null===(t=i.Personalization)||void 0===t?void 0:t.commerceTheme);return(0,h.jsx)("div",{className:"tb_gst_post_container",id:"ts_theme_container",children:(0,h.jsx)(w.default,{ref:this.secondaryRef,autoplay:"".concat(1===i.ThemeRule.slidePost),"slides-per-view":u,navigation:JSON.stringify({nextEl:".swiper-button-next",prevEl:".swiper-button-prev",disabledClass:"swiper-button-none"}),"initial-slide":"0","long-swipes-ratio":.01,"long-swipes-ms":100,hasMoreData:l,loaderData:o,onUpdateData:this.onUpdateData,children:s&&s.length>0?s.map((function(t,r){var i=0===r&&c&&2===t.length;return 3===t.length||i?(0,h.jsx)("swiper-slide",{children:(0,h.jsx)(g,(0,n.Z)((0,n.Z)({dataArr:t,handleAllImageError:e.handleAllImageError,onSiteUploadShow:i,indexNo:r<6?r:"0"},e.props),{},{cardWidth:a,largeDiv:66.66,smallDiv:33.33}),"post_id_".concat(r))},"splide_Id".concat(r)):""})):null})})}}]),a}(d.PureComponent),D=(0,f.$j)((function(t){var e=t.appData;return{appData:e,loaderData:t.loaderData,newPostData:e.newPostData,appendData:e.appendData,hasMoreData:!e.postData.hasMoreData[0]||!1!==e.postData.hasMoreData[0].hasMoreData&&(!e.postData.hasMoreData[e.appendData.networkID]||e.postData.hasMoreData[e.appendData.networkID].hasMoreData)}}),(function(t){return{getDataNextSteps:function(e,a,n,r,i,s,o){return t((0,v.Sx)(e,a,n,r,i,s,o))},showPopUP:function(e){return t((0,v.Bm)(e))}}}))(x)},85942:function(t,e,a){a.d(e,{Z:function(){return n}});var n=function(t,e){return new Promise((function(a,n){var r=null,i=new Image;i.addEventListener("load",(function(){r&&clearTimeout(r),a(i)})),i.addEventListener("error",(function(t){r&&clearTimeout(r),n("".concat(t.type,": ").concat(t.message))})),i.src=t,e&&(r=setTimeout((function(){return n("Timeout exception")}),e))}))}}}]);