"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[519],{50519:function(t,e,a){a.r(e);var n=a(15671),s=a(43144),i=a(60136),o=a(29388),r=a(47313),l=a(8354),c=a(73763),_=a(97914),u=a(46417),m=function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())},d=function(t){(0,i.Z)(a,t);var e=(0,o.Z)(a);function a(){var t;(0,n.Z)(this,a);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={isOpen:!1,step:1,wall_id:null,name:null,email:null,upload_image:[],receiveMail:!1,tandc:!0,nameError:!1,emailError:!1},t.onShowCloseSubmitPicPopUp=function(e){var a=t.props,n=(a.appendData,a.wall);t.props.showPopUP({type:"submit-pic",card:{},personalization:n.Personalization,ThemeRule:n.ThemeRule,UserRule:n.UserRule,wall:n})},t.updateImageWithData=function(e){var a=t.state.upload_image;a&&a.length<5&&(a.push(e),t.setState({upload_image:a}))},t.onUpdateImageAddCaption=function(e){return function(a){var n=t.state.upload_image;n&&n.length>0&&n[e]&&(n[e].caption=a.target.value,n[e].review="",n[e].rating=0,t.setState({upload_image:n}))}},t.onUpdateImageAddReview=function(e){return function(a){var n=t.state.upload_image;n&&n.length>0&&n[e]&&(n[e].review=a.target.value,n[e].caption="",t.setState({upload_image:n}))}},t.onUpdateImageAddRatings=function(e,a){var n=t.state.upload_image;n&&n.length>0&&n[a]&&(n[a].caption="",n[a].rating=e,t.setState({upload_image:n}))},t.onUpdateStep=function(e){return function(a){t.setState({step:e})}},t.onTextName=function(e){t.setState({name:e.target.value,nameError:!1},(function(){null!=t.state.name&&0!=t.state.name.length||t.setState({nameError:!0})}))},t.onTextEmail=function(e){t.setState({email:e.target.value,emailError:!1},(function(){null!=t.state.email&&0!=t.state.email.length&&m(t.state.email)&&!t.state.email.includes("mailinator")||t.setState({emailError:!0})}))},t.onSubmitData=function(e){var a=t.state,n=a.name,s=a.email,i=a.upload_image,o=a.tandc,r=a.receiveMail,l=t.props.wallId;o&&n&&n.length>0&&s&&s.length>0&&m(s)&&!s.includes("mailinator")&&i&&i.length>0&&o?(0,c.uM)({wall_id:l,name:n,email:s,upload_image:i,receive_mail:r}).then((function(e){t.setState({step:3})})).catch((function(t){console.error(t)})):(null!=t.state.name&&0!=t.state.name.length||t.setState({nameError:!0}),null!=t.state.email&&0!=t.state.email.length&&m(t.state.email)&&!s.includes("mailinator")||t.setState({emailError:!0}))},t.onUpdatereceiveMail=function(e){var a=t.state.receiveMail;t.setState({receiveMail:!a})},t.onUpdatetandc=function(e){var a=t.state.tandc;t.setState({tandc:!a})},t.removeProductImage=function(e){return function(a){var n=t.state.upload_image;n&&n.length>0&&n.splice(e,1),t.setState({upload_image:n})}},t}return(0,s.Z)(a,[{key:"render",value:function(){var t=this.state,e=(t.isOpen,t.upload_image,t.step,t.name,t.email,t.receiveMail,t.tandc,t.nameError,t.emailError,this.props.wall),a=e.UgcSettings,n=a.onsite_status?{backgroundColor:a.onsite_btn_color,borderColor:a.onsite_btn_color,color:a.onsite_btn_txt_color}:"",s={fontSize:e.UgcSettings.btn_fontSize+"px",fontFamily:e.UgcSettings.onsite_css_font_btn};return(0,u.jsx)(u.Fragment,{children:0!==a.onsite_status?(0,u.jsx)("div",{id:"tb_post_submit_container_button",className:"50"!=e.Personalization.commerceTheme?"tb_post_submit_container":"ts_gst__post_submit_container_button",children:"50"!=e.Personalization.commerceTheme?(0,u.jsx)("div",{className:"btn-scan",children:(0,u.jsxs)("div",{style:n,className:"tb_post_submit_btn",onClick:this.onShowCloseSubmitPicPopUp,children:[1==e.UgcSettings.onsite_qr_code_status?(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsx)("div",{className:"qr-image",children:(0,u.jsx)(_.Z,{level:"L",size:60,value:e.UgcSettings.onsite_popup_url})})]}):null,a.onsite_qr_code_btn_text?(0,u.jsxs)(u.Fragment,{children:[1==e.UgcSettings.onsite_qr_code_status?(0,u.jsx)("div",{className:"ts__qr_separator",children:(0,u.jsx)("div",{})}):"",(0,u.jsx)("div",{className:"ts_qr-text  tb-cTSfont-".concat(e.UgcSettings.onsite_font_varient_btn),style:s,children:(0,u.jsx)("div",{className:"ts_qr-text_wrap tb-cTSfont-".concat(e.UgcSettings.onsite_font_varient_btn),style:s,children:a.onsite_qr_code_status&&a.onsite_status||a.onsite_qr_code_status?a.onsite_qr_code_btn_text:a.onsite_status?a.onsite_btn_txt:"Submit a Post"})})," "]}):""]})}):(0,u.jsx)("div",{className:"ts_gst_btn-scan",style:n,children:(0,u.jsxs)("div",{className:"ts_gst_post_submit_btn",onClick:this.onShowCloseSubmitPicPopUp,children:[(0,u.jsxs)("div",{className:"ts_gst_qr-image",children:["1"==e.UgcSettings.onsite_qr_code_status?(0,u.jsx)(_.Z,{level:"L",size:60,value:e.UgcSettings.onsite_popup_url}):"",(0,u.jsx)("div",{className:"ts_gst_qr-text  tb-cTSfont-".concat(e.UgcSettings.font_varient),style:s,children:(0,u.jsx)("div",{className:"ts_gst_qr-text_wrap ".concat("1"==e.UgcSettings.onsite_qr_code_status?"wt_qrcode":"wo_qrcode"),children:a.onsite_qr_code_status&&a.onsite_status||a.onsite_qr_code_status?a.onsite_qr_code_btn_text:a.onsite_status?a.onsite_btn_txt:"Submit a Post"})})]}),(0,u.jsx)("div",{className:"ts_gst_qr-image_mobile",children:"Add Your Photo"})]})})}):""})}}]),a}(r.Component);e.default=(0,l.$j)((function(t){return{wallId:t.appData.wallID}}),(function(t){return{showPopUP:function(e){return t((0,c.Bm)(e))}}}))(d)}}]);